---
layout: post
title:  "C++ 速览"
categories: programming
tags: C++
---

* content
{:toc}

## Base

```c++
#include <iostream>    // IO流头文件

using namespace std;    // 标准命名空间

int main()
{
	/*数据类型*/
	int i = 10;
	float f = 3.14;
	bool flag = true;
	char c = 'A';    // 单引号表字符
	char chs[] = { 'a','b','c' };    // 字符数组，会被看作是无结尾的字串
	char s[] = "abc";    // 双引号表字串，隐含'\0'结束符
	int arr[4] = { 0,1,2,3 };
	cout << sizeof(int) << endl;

	/* 标准IO */
	float r = 0; float pi = 3.14;
	cout << "enter the r:";    // cout: 标准输出
	cin >> r;    // cin: 标准输入
	cout << pi * r * r << endl;    // endl: 插入换行符并刷新缓冲区

	/*判断*/
	if (1 + 1 == 2)
		;
	else
		;

	/*三目运算符*/
	int a = 0; int b = 1;
	cout << (a < b ? 'a' : 'b') << endl;
	(a < b ? a : b) = 9;    // 三目运算符左值时，C++会取地址
	cout << a;

	/*循环*/
	int nums[3] = { 0,1,2 };
	for (int i = 0; i < 3; i++)
		cout << nums[i] << ' ';
	cout << endl;

	return 0;
}
```

## 地址
```c++
#include <iostream>

using namespace std;

int main()
{
	int i = 1;
	int* p = &i;    // 整形指针p指向整形变量i
	*p += 1;    // p指向的地址的值+1
	cout << i << ' ' << p << endl;

	p += 1;    // p值+1，即地址偏移1
	cout << i << ' ' << p << endl;

	int arr[3] = { 0,1,2 };
	int* ap = arr;    // 数组名即数组首元素的地址
	cout << arr << ' ' << ap << endl;
	cout << *(ap + 1) << ' ' << arr[1] << endl;

	/*字串指针不同于数组指针，输出字串首地址会输出连续的字串*/
	char chs[] = { 'a','b','c' };
	cout << chs << endl;
	char s[] = { 'a','b','c','\0' };    // 以数组的形式新建一个字串
	cout << s << endl;
	cout << s[1] << ' ' << &s[1] << endl;

	return 0;
}
```

## 类型转换与常量

关于常量修饰符```const```，当其置于最左侧时，修饰其右边的类型，不包括指针符```*```；当其不在最左侧时，则修饰其左边的类型，包括指针符```*```；所以若想声明一个常量指针，则```const```修饰符需要在指针类型的右侧。

```c++
#include <iostream>

using namespace std;

int main()
{
	int a = 1;
	float b = 0.1;
	bool t = true;
	bool f = false;
	a + b == 1.1;    // int->float自动提升
	b + f == 0.1;    // true=1, flase=0

	const int m = 0;
	const int* p_i = &m;    // 指向常量的指针
	m += 1; *p_i += 1;    // error，常量无法被修改
	p_i += 1;    // 指针可以修改

	int i = 1;
	int* const p_c = &i;    // 常量指针
	p_c += 1;    // error，常量指针无法被修改
	i += 1; *p_c += 1;     // 变量可以修改

	const int* const p = &m;    // 指向常量的常量指针
	p += 1; *p += 1;    // error，常量无法修改，常量指针无法修改

	return 0;
}
```

## 结构体

```c++
#include <iostream>

using namespace std;

struct MyStruct
{
	int i;
	float d;
	char c;
	bool b;
};

int main()
{
	MyStruct s = { 1,0.5,'a',true };

	/*结构体成员的访问方式*/
	cout << s.i << ' ' << s.d << ' ' << s.c << ' ' << s.b << endl;

	cout << sizeof(s) << endl;    // 结构体数据类型对齐
	return 0;
}
```

## 命名空间

```c++
#include <iostream>    // IO流头文件

namespace NameSpaceA
{
	int a = 10;
}

namespace NameSpaceB
{
	namespace NameSpaceC
	{
		int a = 20;
	}
}

int main()
{
	std::cout << NameSpaceA::a << std::endl;
	std::cout << NameSpaceB::NameSpaceC::a << std::endl;
	return 0;
}
```
